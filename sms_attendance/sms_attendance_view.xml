<?xml version="1.0" ?>
<openerp>
    <data>

	<!-- Student CLass Attendance -->
		<record model="ir.ui.view" id="sms_class_attendance_form">
         <field name="name">sms.class.attendance.form</field>
         <field name="model">sms.class.attendance</field>
         <field name="arch" type="xml">
            <form string="Student Class Attendance" version="7.0">
				<header>
					<button name="mark_attendance" string="Proceed" states="Draft" type="object" class="oe_highlight" groups=""/>
					<button name="submit_attendance" string="Submit" states="waiting_approval" type="object" class="oe_highlight" groups=""/>
					<button name="cancel_attendance" string="Back" states="waiting_approval" type="object" class="oe_highlight" groups=""/>
					<field name="state" widget="statusbar" statusbar_visible="Draft,waiting_approval,submit" readonly="1"  />
				</header>
				<group>
                   <group string="Class Attendance" col="4" colspan="4">
						<field name="class_id" on_change="onchange_set_domain(class_id,attendance_date)" attrs="{'readonly':[('state','!=','Draft')] }" /> <!-- domain="[('state','=','active')]" />   -->
						<field name="class_teacher" readonly="1" />
						<field name="attendance_date" on_change="onchange_set_domain(class_id,attendance_date)" attrs="{'readonly':[('state','!=','Draft')] }"/>
						<field name="punched_by" readonly="1" /> 
						<field name="state" readonly="1"/>
                   </group>
				<newline/>
				<notebook>
					<page string="List Of Students">
						<field name="child_id" attrs="{'readonly':[(('state','in',['submit','Draft']))] }"/> />
					</page>
				</notebook>
			    </group>  
			  </form>
            </field>
        </record>
        <record model="ir.ui.view" id="sms_class_attendance_tree">
            <field name="name">sms.class.attendance.tree</field>
            <field name="model">sms.class.attendance</field>
            <field name="arch" type="xml">
                <tree string="Student Class Attendance" >
						<field name="class_id" />
						<field name="class_teacher" />
						<field name="attendance_date" />
						<field name="punched_by" />
						<field name="child_id" />
                </tree>
            </field>
        </record>

        <record id="view_sms_class_attendance_search" model="ir.ui.view">
            <field name="name">sms.class.attendance.search</field>
            <field name="model">sms.class.attendance</field>
            <field name="arch" type="xml">
                <search string="Search Student Class Attendance">
                    <field name="name" string="Student"/>
                </search>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_sms_class_attendance">
            <field name="name">Mark Class Attendance</field>
            <field name="res_model">sms.class.attendance</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_draft': 1}</field>
            <field name="search_view_id" ref="view_sms_class_attendance_search"/>
        </record>

        <record model="ir.ui.view" id="sms_class_attendance_lines_tree">
            <field name="name">sms.class.attendance.lines.tree</field>
            <field name="model">sms.class.attendance.lines</field>
            <field name="arch" type="xml">
                <tree string="Student Class Attendance" editable="top" >
<!--						<field name="parent_id" readonly="1"/>   
						<field name="student_class_id" readonly="1"/>    -->
						<field name="student_name" readonly="1"/>
						<field name="present" on_change="onchange_set_present(present)" />
						<field name="absent" on_change="onchange_set_absent(absent)" />
						<field name="leave" on_change="onchange_set_leave(leave)" />
						<field name="state" readonly="1"/>
                </tree>
            </field>
        </record>

     
	</data>
</openerp>
